@model EditTodoListViewModel
@{
	ViewData["Title"] = "Edit List";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-4">
	<div class="row justify-content-center">
		<div class="col-md-8 col-lg-6">
			<div class="card shadow-sm">
				<div class="card-header bg-primary text-white">
					<h4 class="mb-0">
						<i class="bi bi-pencil-square"></i> Edit Todo List
					</h4>
				</div>
				<div class="card-body">
					<form asp-action="Edit" method="post">
						<input type="hidden" asp-for="ListId" />
						<input type="hidden" asp-for="ReturnUrl" />

						<div class="mb-3">
							<label asp-for="Title" class="form-label" for="ListsEditTitle">
								List Title
							</label>
							<input id="ListsEditTitle" asp-for="Title" class="form-control" placeholder="Enter list title" autofocus />
							<span asp-validation-for="Title" class="text-danger"></span>
						</div>

						<div class="mb-3">
							<label asp-for="Description" class="form-label" for="ListsEditDescription">
								Description (Optional)
							</label>
							<textarea id="ListsEditDescription" asp-for="Description" class="form-control" rows="3"
									  placeholder="Add a description for this list"></textarea>
							<span asp-validation-for="Description" class="text-danger"></span>
						</div>

						@if (!string.IsNullOrEmpty(Model.UserRole))
						{
							<div class="alert alert-info mb-3">
								<i class="bi bi-info-circle"></i>
								<strong>Your Role:</strong> @Model.UserRole
								<br />
								<i class="bi bi-list-task"></i>
								<strong>Active Tasks:</strong> @Model.PendingTasks
							</div>
						}

						<div class="d-flex gap-2">
							<button type="submit" class="btn btn-primary">
								<i class="bi bi-check-lg"></i> Save Changes
							</button>
							<a href="@Model.ReturnUrl" class="btn btn-secondary">
								<i class="bi bi-x-lg"></i> Cancel
							</a>
						</div>
					</form>
				</div>
			</div>

			<!-- Delete Section -->
			<div class="card shadow-sm mt-3 border-danger">
				<div class="card-header bg-danger text-white">
					<h5 class="mb-0">
						<i class="bi bi-exclamation-triangle"></i> Danger Zone
					</h5>
				</div>
				<div class="card-body">
					<p class="text-muted mb-3">
						Deleting this list will permanently remove it and all associated tasks. This action cannot be undone.
					</p>
					<form asp-action="Delete"
						  asp-route-id="@Model.ListId"
						  asp-route-returnUrl="@Url.Action("Index")"
						  method="post"
						  onsubmit="return confirm('Are you sure you want to delete this list and all its tasks? This action cannot be undone!');">
						<button type="submit" class="btn btn-danger">
							<i class="bi bi-trash"></i> Delete List
						</button>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>

@section Scripts {
	<partial name="_ValidationScriptsPartial" />
}